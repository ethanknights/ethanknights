name: Update Word of the Day

on:
  schedule:
    - cron: "0 6 * * *"  # This runs the action daily at 6 AM UTC
  workflow_dispatch:  # Allows for manual trigger

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout repository
      - name: Checkout repository
        uses: actions/checkout@v2

      # Step 2: Fetch Word of the Day from Wordnik API
      - name: Fetch Word of the Day
        id: wordnik
        run: |
          # Fetch the word of the day from Wordnik API
          WORDNIK_API_KEY="${{ secrets.WORDNIK_API_KEY }}"
          WORD_OF_DAY=$(curl -s "https://api.wordnik.com/v4/words.json/wordOfTheDay?api_key=$WORDNIK_API_KEY" | jq -r '.word')
          DEFINITION=$(curl -s "https://api.wordnik.com/v4/words.json/wordOfTheDay?api_key=$WORDNIK_API_KEY" | jq -r '.definitions[0].text')

          # Overwrite the README.md file with the new Word of the Day at the top
          echo "> [!info] **$WORD_OF_DAY**: $DEFINITION\n> *Word of the Day*" > README.md

      # Step 3: Commit and push the updated README
      - name: Commit and push changes
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"
          git add README.md
          git commit -m "Update Word of the Day"
          git push
